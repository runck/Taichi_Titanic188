# 太极图形课S1-大作业 188行代码的《泰坦尼克号》

## 作业来源
所谓来源，是一件可近可远的事情。

从近，是其躯体，是流体小作业的改进，是基于Taichi自带示例的mpm，其丝滑仿若高山流水。从远，是其灵魂，是某篇[“99行代码的《冰雪奇缘》”](https://zhuanlan.zhihu.com/p/97700605)，其配图让人食欲大开。

那时，当我第一次点开这段“冰雪奇缘”的视频，我看见了三块真空中栩栩如生的方块。于是，我以为我大概似乎也许的确是被骗进来了。

而这一骗，便从金秋到了寒冬。

在这段时间里，我每天添一点知识，终于在这最后领会到了这寥寥数行后所包裹的精妙与恢弘，正像简若黑白又裹挟一切的太极。

而今，这一切又似乎即将回归来时的沉寂，仿佛随处可见的数值耗散，将一切殆尽。为了让这个故事从指数衰减的趋势重回太极般循环的螺旋，这次或许轮到我，来尝试把下一个人也骗进来。

这大抵就是这个作业——188行代码的《泰坦尼克号》——的来源。


## 运行方式
#### 运行环境：
`[Taichi] version 0.8.5, llvm 10.0.0, commit 45c6ad48, win, python 3.9.1`

#### 运行方式：
python Titanic188.py


## 效果展示
#### 文字描述：
1912年4月14日，星期天晚上，号称“永不沉没的”泰坦尼克号飞驰在它生命中最后的一个夜晚，驶向波涛汹涌中的死亡冰山……
（免责声明：危险动作，请勿模仿；本电影为仿真模拟中，没有人员或动物受到伤害）


#### 动图展示：
![demo.gif](./data/demo.gif)


## 整体结构
```
-LICENSE
-|data
-README.MD
-Titanic188.py
```


## 实现细节

### 主要效果
基于Taichi自带示例的mpm法，补充实现了下列效果：

1. 船，具有“水能载舟、亦能覆舟”的特性。载舟的实现方式，是通过统计其附近网格的水的总质量（因为浮力等于被排挤的水的重量）；覆舟的实现方式，是通过判断局部的水是否处于该局部船的上方。为了实现这一目标，目前将原来的网格按物质进行了拆分（或许有更省资源的方法？）。
2. 冰山，一座冰的山状物，其实是“冰雪奇缘”的雪被爱莎施加了变硬魔法后得到。
3. 爆炸物，把塑形形变中的箝位值设得更严格一些（尤其是压缩的塑形阈值），就能实现偶然的爆炸效果。其实或许是真爆炸——“数值爆炸”。这在别的代码里可能是bug，但请牢记，这在本剧组里是为了实现游轮漏油爆炸而特意留下的“特性”。


### 整体流程
1. 起。创建船、水、冰山，并将其放置于具有视觉张力的非平衡初态。
2. 承。让船在水面拍打、疾驰，溅起水花，撞向冰山。每一dt，都是动量于网格的暗中交易，也潜藏者浮力和重力从中作梗。
3. 转。爆炸，到处爆炸，不可预料（包括作者与上帝）的却恰到好处的爆炸。
4. 合。沉船，船因塑形变形失去了棱角，最终沉沦于冷酷的冰山脚下。


感谢观看！



